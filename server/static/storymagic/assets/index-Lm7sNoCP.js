var Ie=Object.defineProperty;var Te=(e,t,n)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ie=(e,t,n)=>Te(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function N(){}function Le(e){return e()}function ge(){return Object.create(null)}function I(e){e.forEach(Le)}function Oe(e){return typeof e=="function"}function Y(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function De(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function k(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode&&e.parentNode.removeChild(e)}function xe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function C(){return H(" ")}function He(){return H("")}function P(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function Fe(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function f(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Pe(e){return e===""?null:+e}function Ke(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.data!==t&&(e.data=t)}function A(e,t){e.value=t??""}function be(e,t,n){for(let o=0;o<e.options.length;o+=1){const l=e.options[o];if(l.__value===t){l.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Be(e){const t=e.querySelector(":checked");return t&&t.__value}function Re(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}let J;function G(e){J=e}function ae(){if(!J)throw new Error("Function called outside component initialization");return J}function fe(e){ae().$$.on_mount.push(e)}function qe(e){ae().$$.on_destroy.push(e)}function de(){const e=ae();return(t,n,{cancelable:o=!1}={})=>{const l=e.$$.callbacks[t];if(l){const r=Re(t,n,{cancelable:o});return l.slice().forEach(i=>{i.call(e,r)}),!r.defaultPrevented}return!0}}function Ge(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}const K=[],ce=[];let B=[];const ve=[],Je=Promise.resolve();let ue=!1;function Ue(){ue||(ue=!0,Je.then(Ae))}function Q(e){B.push(e)}const se=new Set;let F=0;function Ae(){if(F!==0)return;const e=J;do{try{for(;F<K.length;){const t=K[F];F++,G(t),Ve(t.$$)}}catch(t){throw K.length=0,F=0,t}for(G(null),K.length=0,F=0;ce.length;)ce.pop()();for(let t=0;t<B.length;t+=1){const n=B[t];se.has(n)||(se.add(n),n())}B.length=0}while(K.length);for(;ve.length;)ve.pop()();ue=!1,se.clear(),G(e)}function Ve(e){if(e.fragment!==null){e.update(),I(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}function We(e){const t=[],n=[];B.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),B=t}const W=new Set;let T;function Me(){T={r:0,c:[],p:T}}function ze(){T.r||I(T.c),T=T.p}function z(e,t){e&&e.i&&(W.delete(e),e.i(t))}function D(e,t,n,o){if(e&&e.o){if(W.has(e))return;W.add(e),T.c.push(()=>{W.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function X(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function pe(e){e&&e.c()}function ee(e,t,n){const{fragment:o,after_update:l}=e.$$;o&&o.m(t,n),Q(()=>{const r=e.$$.on_mount.map(Le).filter(Oe);e.$$.on_destroy?e.$$.on_destroy.push(...r):I(r),e.$$.on_mount=[]}),l.forEach(Q)}function te(e,t){const n=e.$$;n.fragment!==null&&(We(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ze(e,t){e.$$.dirty[0]===-1&&(K.push(e),Ue(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(e,t,n,o,l,r,i=null,s=[-1]){const d=J;G(e);const c=e.$$={fragment:null,ctx:[],props:r,update:N,not_equal:l,bound:ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:ge(),dirty:s,skip_bound:!1,root:t.target||d.$$.root};i&&i(c.root);let g=!1;if(c.ctx=n?n(e,t.props||{},(a,h,...u)=>{const _=u.length?u[0]:h;return c.ctx&&l(c.ctx[a],c.ctx[a]=_)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](_),g&&Ze(e,a)),h}):[],c.update(),g=!0,I(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const a=Ke(t.target);c.fragment&&c.fragment.l(a),a.forEach(y)}else c.fragment&&c.fragment.c();t.intro&&z(e.$$.fragment),ee(e,t.target,t.anchor),Ae()}G(d)}class oe{constructor(){ie(this,"$$");ie(this,"$$set")}$destroy(){te(this,1),this.$destroy=N}$on(t,n){if(!Oe(n))return N;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(t){this.$$set&&!De(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Qe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qe);function Xe(e){let t;return{c(){t=m("span"),f(t,"class","spinner-border spinner-border-sm"),f(t,"role","status"),f(t,"aria-hidden","true")},m(n,o){k(n,t,o)},d(n){n&&y(t)}}}function Ye(e){let t;return{c(){t=m("i"),f(t,"class","bi bi-arrow-right")},m(n,o){k(n,t,o)},d(n){n&&y(t)}}}function et(e){let t,n,o,l,r,i,s,d,c,g,a,h,u,_,$,x,O,w,b,S,v,R,q,re,U,M,me,le,he;function _e(E,L){return E[0]?Xe:Ye}let V=_e(e),j=V(e);return{c(){t=m("h3"),t.textContent="Create a story",n=C(),o=m("div"),l=m("label"),l.textContent="Topic",r=C(),i=m("textarea"),s=C(),d=m("div"),c=m("label"),c.textContent="Grade level",g=C(),a=m("select"),h=m("option"),h.textContent="Preschool",u=m("option"),u.textContent="Kindergarten",_=m("option"),_.textContent="1st grade",$=m("option"),$.textContent="2nd grade",x=m("option"),x.textContent="3rd grade",O=m("option"),O.textContent="4th grade",w=m("option"),w.textContent="5th grade",b=C(),S=m("div"),v=m("label"),v.textContent="Max sentence count",R=C(),q=m("input"),re=C(),U=m("div"),M=m("button"),me=H(`Create story\r
    `),j.c(),f(t,"class","mb-3"),f(l,"for","topic"),f(l,"class","form-label"),f(i,"class","form-control"),f(i,"id","topic"),f(i,"rows","3"),f(i,"placeholder","finding a baby dragon"),f(i,"aria-label","Enter a topic"),f(o,"class","mb-3"),f(c,"for","grade"),f(c,"class","form-label"),h.__value="preschool",A(h,h.__value),u.__value="kindergarten",A(u,u.__value),_.__value="1st grade",A(_,_.__value),$.__value="2nd grade",A($,$.__value),x.__value="3rd grade",A(x,x.__value),O.__value="4th grade",A(O,O.__value),w.__value="5th grade",A(w,w.__value),f(a,"id","grade"),f(a,"class","form-select"),f(a,"aria-label","Select grade level"),e[2]===void 0&&Q(()=>e[6].call(a)),f(d,"class","mb-3"),f(v,"for","sentence-count"),f(v,"class","form-label"),f(q,"type","number"),f(q,"id","sentence-count"),f(q,"class","form-control"),f(q,"placeholder","4"),f(q,"aria-label","Enter max sentence count"),f(S,"class","mb-3"),f(M,"class","btn btn-primary create-btn svelte-1tted4v"),f(M,"type","button"),f(M,"title","Create book")},m(E,L){k(E,t,L),k(E,n,L),k(E,o,L),p(o,l),p(o,r),p(o,i),A(i,e[1]),k(E,s,L),k(E,d,L),p(d,c),p(d,g),p(d,a),p(a,h),p(a,u),p(a,_),p(a,$),p(a,x),p(a,O),p(a,w),be(a,e[2],!0),k(E,b,L),k(E,S,L),p(S,v),p(S,R),p(S,q),A(q,e[3]),k(E,re,L),k(E,U,L),p(U,M),p(M,me),j.m(M,null),le||(he=[P(i,"input",e[5]),P(a,"change",e[6]),P(q,"input",e[7]),P(M,"click",e[4])],le=!0)},p(E,[L]){L&2&&A(i,E[1]),L&4&&be(a,E[2]),L&8&&Pe(q.value)!==E[3]&&A(q,E[3]),V!==(V=_e(E))&&(j.d(1),j=V(E),j&&(j.c(),j.m(M,null)))},i:N,o:N,d(E){E&&(y(t),y(n),y(o),y(s),y(d),y(b),y(S),y(re),y(U)),j.d(),le=!1,I(he)}}}function tt(e,t,n){const o=de();let{creating:l=!1}=t,r,i,s;fe(()=>{n(2,i=localStorage.getItem("grade")||"preschool"),n(3,s=localStorage.getItem("sentenceCount"))});function d(){localStorage.setItem("grade",i),localStorage.setItem("sentenceCount",s),o("create-story",{topic:r,grade:i,sentenceCount:s})}function c(){r=this.value,n(1,r)}function g(){i=Be(this),n(2,i)}function a(){s=Pe(this.value),n(3,s)}return e.$$set=h=>{"creating"in h&&n(0,l=h.creating)},[l,r,i,s,d,c,g,a]}class nt extends oe{constructor(t){super(),ne(this,t,tt,et,Y,{creating:0})}}function ye(e,t,n){const o=e.slice();return o[10]=t[n],o}function we(e,t,n){const o=e.slice();return o[13]=t[n],o}function ke(e){let t,n=e[13]+"",o,l,r;return{c(){t=m("span"),o=H(n),f(t,"class","word svelte-k7azn5"),f(t,"tabindex","0")},m(i,s){k(i,t,s),p(t,o),l||(r=P(t,"focus",rt),l=!0)},p(i,s){s&1&&n!==(n=i[13]+"")&&Z(o,n)},d(i){i&&y(t),l=!1,r()}}}function Ee(e){let t,n,o=X(e[10].split(" ")),l=[];for(let r=0;r<o.length;r+=1)l[r]=ke(we(e,o,r));return{c(){t=m("p");for(let r=0;r<l.length;r+=1)l[r].c();n=C(),f(t,"class","sentence fs-3 mt-4 svelte-k7azn5")},m(r,i){k(r,t,i);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null);p(t,n)},p(r,i){if(i&1){o=X(r[10].split(" "));let s;for(s=0;s<o.length;s+=1){const d=we(r,o,s);l[s]?l[s].p(d,i):(l[s]=ke(d),l[s].c(),l[s].m(t,n))}for(;s<l.length;s+=1)l[s].d(1);l.length=o.length}},d(r){r&&y(t),xe(l,r)}}}function ot(e){let t,n,o=e[0].title+"",l,r,i,s,d,c,g,a,h,u,_,$,x,O=X(e[0].sentences),w=[];for(let b=0;b<O.length;b+=1)w[b]=Ee(ye(e,O,b));return{c(){t=m("div"),n=m("h3"),l=H(o),r=C();for(let b=0;b<w.length;b+=1)w[b].c();i=C(),s=m("div"),d=m("button"),d.textContent="⟳",c=C(),g=m("button"),g.textContent="?",a=C(),h=m("button"),h.textContent="<",u=C(),_=m("button"),_.textContent=">",f(n,"class","mb-3"),f(t,"class","story svelte-k7azn5"),f(d,"class","btn btn-light me-auto action-btn svelte-k7azn5"),f(g,"class","btn btn-light action-btn svelte-k7azn5"),f(h,"class","btn btn-light action-btn svelte-k7azn5"),f(_,"class","btn btn-light action-btn svelte-k7azn5"),f(s,"class","actions svelte-k7azn5")},m(b,S){k(b,t,S),p(t,n),p(n,l),p(t,r);for(let v=0;v<w.length;v+=1)w[v]&&w[v].m(t,null);e[4](t),k(b,i,S),k(b,s,S),p(s,d),p(s,c),p(s,g),p(s,a),p(s,h),p(s,u),p(s,_),$||(x=[P(d,"click",e[3]),P(g,"click",e[2]),P(h,"click",Ne),P(_,"click",je)],$=!0)},p(b,[S]){if(S&1&&o!==(o=b[0].title+"")&&Z(l,o),S&1){O=X(b[0].sentences);let v;for(v=0;v<O.length;v+=1){const R=ye(b,O,v);w[v]?w[v].p(R,S):(w[v]=Ee(R),w[v].c(),w[v].m(t,null))}for(;v<w.length;v+=1)w[v].d(1);w.length=O.length}},i:N,o:N,d(b){b&&(y(t),y(i),y(s)),xe(w,b),e[4](null),$=!1,I(x)}}}function Ce(e){return e.replace(/[^a-zA-Z]/g,"")}function rt(e){Array.from(document.querySelectorAll(".focus")).forEach(t=>{t.classList.remove("focus")}),e.target.classList.add("focus")}function Ne(){var t,n,o;const e=document.querySelector(".word.focus");e!=null&&e.previousElementSibling?e.previousElementSibling.focus():(o=(n=(t=e==null?void 0:e.parentElement)==null?void 0:t.previousElementSibling)==null?void 0:n.querySelector(".word"))==null||o.focus()}function je(){var t,n,o;const e=document.querySelector(".word.focus");e!=null&&e.nextElementSibling?e.nextElementSibling.focus():(o=(n=(t=e==null?void 0:e.parentElement)==null?void 0:t.nextElementSibling)==null?void 0:n.querySelector(".word"))==null||o.focus()}function lt(e,t,n){let{story:o}=t;const l=de();let r,i;function s(){const u=document.querySelector(".word.focus");l("word-help",{word:Ce(u.textContent)})}function d(u){u.target.classList.contains("word")&&(r=setTimeout(()=>{l("word-help",{word:Ce(u.target.textContent)})},500))}function c(u){u.target.classList.contains("word")&&clearTimeout(r)}function g(u){switch(u.key){case"ArrowLeft":Ne();break;case"ArrowRight":je();break;case" ":u.preventDefault(),s();break}}function a(){l("start-over")}fe(()=>{var u;(u=document.querySelector(".word"))==null||u.focus(),document.addEventListener("keydown",g),document.addEventListener("mousedown",d),document.addEventListener("mouseup",c),document.addEventListener("mouseleave",c),document.addEventListener("touchstart",d),document.addEventListener("touchend",c),document.addEventListener("touchcancel",c)}),qe(()=>{document.removeEventListener("keydown",g),document.removeEventListener("mousedown",d),document.removeEventListener("mouseup",c),document.removeEventListener("mouseleave",c),i.removeEventListener("touchstart",d),i.removeEventListener("touchend",c),i.removeEventListener("touchcancel",c)});function h(u){ce[u?"unshift":"push"](()=>{i=u,n(1,i)})}return e.$$set=u=>{"story"in u&&n(0,o=u.story)},[o,i,s,a,h]}class it extends oe{constructor(t){super(),ne(this,t,lt,ot,Y,{story:0})}}function st(e){let t,n,o,l,r,i,s,d,c=e[1].map($e).join(" • ")+"",g,a,h;return{c(){t=m("div"),n=m("div"),o=m("div"),o.textContent="×",l=C(),r=m("h3"),i=H(e[0]),s=C(),d=m("h4"),g=H(c),f(o,"class","close-button svelte-5i12pq"),f(r,"class","text-center word"),f(d,"class","mt-4 text-center pronunciation"),f(n,"class","modal-box svelte-5i12pq"),f(t,"class","modal-wrapper svelte-5i12pq")},m(u,_){k(u,t,_),p(t,n),p(n,o),p(n,l),p(n,r),p(r,i),p(n,s),p(n,d),p(d,g),a||(h=[P(o,"click",e[2]),P(n,"click",Fe(e[3])),P(t,"click",e[2])],a=!0)},p(u,[_]){_&1&&Z(i,u[0]),_&2&&c!==(c=u[1].map($e).join(" • ")+"")&&Z(g,c)},i:N,o:N,d(u){u&&y(t),a=!1,I(h)}}}const $e=e=>e.grapheme;function ct(e,t,n){let{word:o}=t,{wordMapping:l}=t;const r=de();fe(()=>{document.addEventListener("keydown",i)}),qe(()=>{document.removeEventListener("keydown",i)});function i(c){(c.key==="Escape"||c.key==="Enter"||c.key===" ")&&s()}function s(){r("close")}function d(c){Ge.call(this,e,c)}return e.$$set=c=>{"word"in c&&n(0,o=c.word),"wordMapping"in c&&n(1,l=c.wordMapping)},[o,l,s,d]}class ut extends oe{constructor(t){super(),ne(this,t,ct,st,Y,{word:0,wordMapping:1})}}function at(e){let t,n,o,l;t=new it({props:{story:e[1]}}),t.$on("word-help",e[5]),t.$on("start-over",e[6]);let r=e[0]==="seeking-word-help"&&Se(e);return{c(){pe(t.$$.fragment),n=C(),r&&r.c(),o=He()},m(i,s){ee(t,i,s),k(i,n,s),r&&r.m(i,s),k(i,o,s),l=!0},p(i,s){const d={};s&2&&(d.story=i[1]),t.$set(d),i[0]==="seeking-word-help"?r?(r.p(i,s),s&1&&z(r,1)):(r=Se(i),r.c(),z(r,1),r.m(o.parentNode,o)):r&&(Me(),D(r,1,1,()=>{r=null}),ze())},i(i){l||(z(t.$$.fragment,i),z(r),l=!0)},o(i){D(t.$$.fragment,i),D(r),l=!1},d(i){i&&(y(n),y(o)),te(t,i),r&&r.d(i)}}}function ft(e){let t,n;return t=new nt({props:{creating:e[0]==="creating"}}),t.$on("create-story",e[4]),{c(){pe(t.$$.fragment)},m(o,l){ee(t,o,l),n=!0},p(o,l){const r={};l&1&&(r.creating=o[0]==="creating"),t.$set(r)},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){D(t.$$.fragment,o),n=!1},d(o){te(t,o)}}}function Se(e){let t,n;return t=new ut({props:{word:e[3],wordMapping:e[2][e[3]]}}),t.$on("close",e[7]),{c(){pe(t.$$.fragment)},m(o,l){ee(t,o,l),n=!0},p(o,l){const r={};l&8&&(r.word=o[3]),l&12&&(r.wordMapping=o[2][o[3]]),t.$set(r)},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){D(t.$$.fragment,o),n=!1},d(o){te(t,o)}}}function dt(e){let t,n,o,l,r,i,s,d,c;const g=[ft,at],a=[];function h(u,_){return u[0]==="initial"||u[0]==="creating"?0:u[0]==="reading-story"||u[0]==="seeking-word-help"?1:-1}return~(r=h(e))&&(i=a[r]=g[r](e)),{c(){t=m("main"),n=m("div"),o=m("div"),l=m("div"),i&&i.c(),s=C(),d=m("footer"),d.textContent="by Della Tech LLC",f(l,"class","col-md-6"),f(o,"class","row mt-3 justify-content-center"),f(n,"class","container"),f(d,"class","svelte-j5z07n")},m(u,_){k(u,t,_),p(t,n),p(n,o),p(o,l),~r&&a[r].m(l,null),k(u,s,_),k(u,d,_),c=!0},p(u,[_]){let $=r;r=h(u),r===$?~r&&a[r].p(u,_):(i&&(Me(),D(a[$],1,1,()=>{a[$]=null}),ze()),~r?(i=a[r],i?i.p(u,_):(i=a[r]=g[r](u),i.c()),z(i,1),i.m(l,null)):i=null)},i(u){c||(z(i),c=!0)},o(u){D(i),c=!1},d(u){u&&(y(t),y(s),y(d)),~r&&a[r].d()}}}function pt(e,t,n){let o="initial",l=null,r={},i=null;async function s(a){const{topic:h,grade:u,sentenceCount:_}=a.detail;n(0,o="creating");const x=await(await fetch("/stories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:h,grade:u,sentenceCount:_})})).json();n(1,l=x.story),n(2,r=x.wordMappings||{}),n(0,o="reading-story")}function d(a){const{word:h}=a.detail;h in r&&(n(3,i=h),n(0,o="seeking-word-help"))}function c(){n(0,o="initial"),n(1,l=null),n(2,r={})}function g(){n(0,o="reading-story"),n(3,i=null)}return[o,l,r,i,s,d,c,g]}class mt extends oe{constructor(t){super(),ne(this,t,pt,dt,Y,{})}}new mt({target:document.getElementById("app")});
